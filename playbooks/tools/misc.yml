- name: Install Meg
  tags: meg
  hosts: all
  tasks:
  - name: Download meg
    shell: |
      /usr/local/go/bin/go get -u github.com/tomnomnom/meg

  - name: Setup meg
    shell: |
      mkdir /opt/crew/misc/meg
      mv go/bin/meg /opt/crew/misc/meg/

  - name: Symink meg
    become: yes
    file:
      src: /opt/crew/misc/meg/meg
      dest: /usr/local/bin/meg
      state: link

- name: Install gf
  tags: gf
  hosts: all
  tasks:
  - name: Download gf
    shell: |
      /usr/local/go/bin/go get -u github.com/tomnomnom/gf

  - name: Setup gf
    shell: |
      mkdir /opt/crew/misc/gf
      mv go/bin/gf /opt/crew/misc/gf/

  - name: Symink gf
    become: yes
    file:
      src: /opt/crew/misc/gf/gf
      dest: /usr/local/bin/gf
      state: link

- name: Install httpx
  tags: httpx
  vars:
    httpx_ver:
      1.0.3
  hosts: all
  tasks: 
  - name: Download httpx
    command: wget https://github.com/projectdiscovery/httpx/releases/download/v{{ httpx_ver }}/httpx_{{ httpx_ver }}_linux_amd64.tar.gz

  - name: Install httpx
    shell: |
      tar xvf httpx_{{ httpx_ver }}_linux_amd64.tar.gz httpx 
      mkdir /opt/crew/misc/httpx/
      mv httpx /opt/crew/misc/httpx/
    
  - name: Symlink httpx
    become: yes
    file:
      src: /opt/crew/misc/httpx/httpx
      dest: /usr/local/bin/httpx
      state: link
  
  - name: Delete httpx
    command: rm -rf httpx_{{ httpx_ver }}_linux_amd64.tar.gz

- name: Install dnsx
  tags: dnsx
  vars:
    dnsx_ver:
      1.0.1
  hosts: all
  tasks: 
  - name: Download dnsx
    command: wget https://github.com/projectdiscovery/dnsx/releases/download/v{{ dnsx_ver }}/dnsx_{{ dnsx_ver }}_linux_amd64.tar.gz

  - name: Install dnsx
    shell: |
      mkdir /opt/crew/misc/dnsx
      tar xvf dnsx_{{ dnsx_ver }}_linux_amd64.tar.gz dnsx
      mv dnsx /opt/crew/misc/dnsx/
    
  - name: Symlink dnsx
    become: yes
    file:
      src: /opt/crew/misc/dnsx/dnsx
      dest: /usr/local/bin/dnsx
      state: link
  
  - name: Delete dnsx
    command: rm -rf dnsx_{{ dnsx_ver }}_linux_amd64.tar.gz